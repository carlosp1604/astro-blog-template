---
---

<script is:inline>
    (function () {
      const stored = localStorage.getItem('theme')

      const mq = window.matchMedia('(prefers-color-scheme: dark)')

      function applySystemTheme() {
        document.documentElement.setAttribute('data-theme', mq.matches ? 'dark' : 'light')
      }

      if (stored === 'dark' || stored === 'light') {
        // Dark | Light
        document.documentElement.setAttribute('data-theme', stored)
      } else {
        // System
        applySystemTheme()
        mq.addEventListener('change', applySystemTheme)
      }

      window.setTheme = function (mode) {
        if (mode === 'light' || mode === 'dark') {
          document.documentElement.setAttribute('data-theme', mode)
          localStorage.setItem('theme', mode)
        } else {
          // Reset to "system"
          localStorage.setItem('theme', 'system')
          applySystemTheme()
          mq.addEventListener('change', applySystemTheme)
        }
      }
    })()
</script>