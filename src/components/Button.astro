---
import { clsx } from 'clsx'

interface Props {
    variant?: 'primary' | 'secondary' | 'link'
    type?: 'button' | 'submit' | 'reset'
    href?: string
    disabled?: boolean
}

const {
  variant = 'primary',
  type = 'button',
  href,
  disabled = false,
  ...rest
} = Astro.props

const base = clsx(
  'inline-flex items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors',
  'focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none'
)

const variants: Record<string, string> = {
  primary:
    'bg-app-brand-primary text-white hover:bg-app-brand-primary/90 focus:ring-app-brand-primary',
  secondary:
    'bg-app-surface text-app-text border border-app-border hover:bg-app-surface/80 focus:ring-app-text',
  link: 'text-app-brand-primary underline-offset-4 hover:underline focus:ring-app-brand-primary'
}

const className = clsx(base, variants[variant])
---

{
  href ? (
    <a
      href={href}
      class={className}
    >
      <slot />
    </a>
  ) : (
    <button
      type={type}
      disabled={disabled}
      class={className}
      {...rest}
    >
      <slot />
    </button>
  )
}
